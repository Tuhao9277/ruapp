(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"249":function(t,e,n){"use strict";n.d(e,"a",function(){return createSelectorQuery});var i=n(2),r=function(){function defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function filter(t,e,n){if(!e)return null;var i=t.id,r=t.dataset,a=t.rect,o=t.size,s=t.scrollOffset,u=t.properties,l=void 0===u?[]:u,c=t.computedStyle,h=void 0===c?[]:c,f=e.getBoundingClientRect(),m=f.left,p=f.right,d=f.top,v=f.bottom,y=f.width,b=f.height,g="html"===n,k={};if(i&&(k.id=e.id),r&&(k.dataset=Object.assign({},e.dataset)),a&&(g?(k.left=0,k.right=0,k.top=0,k.bottom=0):(k.left=m,k.right=p,k.top=d,k.bottom=v)),o&&(g?(k.width=e.clientWidth,k.height=e.clientHeight):(k.width=y,k.height=b)),s&&(k.scrollLeft=e.scrollLeft,k.scrollTop=e.scrollTop,k.scrollHeight=e.scrollHeight,k.scrollWidth=e.scrollWidth),l.length&&l.forEach(function(t){var n=e.getAttribute(t);n&&(k[t]=n)}),h.length){var _=window.getComputedStyle(e);h.forEach(function(t){var e=_.getPropertyValue(t);e&&(k[t]=e)})}return k}var a=function(){function Query(){_classCallCheck(this,Query),this._defaultWebviewId=null,this._webviewId=null,this._queue=[],this._queueCb=[],this._component=null}return r(Query,[{"key":"in","value":function _in(t){return this._component=t,this}},{"key":"select","value":function select(t){return"string"==typeof t&&(t=t.replace(">>>",">")),new o(t,this,!0)}},{"key":"selectAll","value":function selectAll(t){return"string"==typeof t&&(t=t.replace(">>>",">")),new o(t,this,!1)}},{"key":"selectViewport","value":function selectViewport(){return new o("html",this,!0)}},{"key":"exec","value":function exec(t){var e=this;!function queryBat(t,e){var n=[];t.forEach(function(t){var e=t.selector,r=t.single,a=t.fields,o=t.component,s=null!==o&&i.j.findDOMNode(o)||document,u=!1;if(s!==document)for(var l=s.parentNode.querySelectorAll(e),c=0,h=l.length;c<h;++c)if(s===l[c]){u=!0;break}if(r){var f=!0===u?s:s.querySelector(e);n.push(filter(a,f,e))}else{var m=s.querySelectorAll(e),p=[];!0===u&&p.push(s);for(var d=0,v=m.length;d<v;++d)p.push(m[d]);n.push(p.map(function(t){return filter(a,t)}))}}),e(n)}(this._queue,function(n){var i=e._queueCb;n.forEach(function(t,n){"function"==typeof i[n]&&i[n].call(e,t)}),"function"==typeof t&&t.call(e,n)})}},{"key":"_push","value":function _push(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._queue.push({"component":e,"selector":t,"single":n,"fields":i}),this._queueCb.push(r)}}]),Query}(),o=function(){function NodesRef(t,e,n){_classCallCheck(this,NodesRef),this._component=e._component,this._selector=t,this._selectorQuery=e,this._single=n}return r(NodesRef,[{"key":"boundingClientRect","value":function boundingClientRect(t){var e=this._selector,n=this._component,i=this._single,r=this._selectorQuery;return r._push(e,n,i,{"id":!0,"dataset":!0,"rect":!0,"size":!0},t),r}},{"key":"scrollOffset","value":function scrollOffset(t){var e=this._selector,n=this._component,i=this._single,r=this._selectorQuery;return r._push(e,n,i,{"id":!0,"dataset":!0,"scrollOffset":!0},t),r}},{"key":"fields","value":function fields(t,e){var n=this._selector,i=this._component,r=this._single,a=this._selectorQuery,o=t.id,s=t.dataset,u=t.rect,l=t.size,c=t.scrollOffset,h=t.properties,f=void 0===h?[]:h,m=t.computedStyle,p=void 0===m?[]:m;return a._push(n,i,r,{"id":o,"dataset":s,"rect":u,"size":l,"scrollOffset":c,"properties":f,"computedStyle":p},e),a}}]),NodesRef}();function createSelectorQuery(){return new a}},"300":function(t,e,n){"use strict";var i=n(2),r=n(214),a=n.n(r),o=n(3),s=n(249),u=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=new function StyleSheet(){var t=this;_classCallCheck(this,StyleSheet),this.$style=null,this.sheet=null,this.appendStyleSheet=function(){t.$style.setAttribute("type","text/css"),t.$style.setAttribute("data-type","Taro"),document.getElementsByTagName("head")[0].appendChild(t.$style),t.sheet=t.$style.sheet,"insertRule"in t.sheet||console.warn("当前浏览器不支持 stylesheet.insertRule 接口")},this.add=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;null===t.sheet&&t.appendStyleSheet(),t.sheet.insertRule(e,n)},this.$style=document.createElement("style")},h="transitionend",f="transform",m=document.createElement("div");m.style.cssText="\n  -webkit-animation-name: webkit;\n  -moz-animation-name: moz;\n  -ms-animation-name: ms;\n  animation-name: standard;\n","standard"===m.style["animation-name"]?(h="transitionend",f="transform"):"webkit"===m.style["-webkit-animation-name"]?(h="webkitTransionEnd",f="-webkit-transform"):"moz"===m.style["-moz-animation-name"]?(h="mozTransionEnd",f="-moz-transform"):"ms"===m.style["-ms-animation-name"]&&(h="MSTransionEnd",f="-ms-transform");var p=0,d=function(){function Animation(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.duration,i=void 0===n?400:n,r=e.delay,a=void 0===r?0:r,o=e.timingFunction,s=void 0===o?"linear":o,l=e.transformOrigin,c=void 0===l?"50% 50% 0":l,m=e.unit,d=void 0===m?"px":m;_classCallCheck(this,Animation),this.rules=[],this.transform=[f+":"],this.steps=[],this.animationMap={},this.animationMapCount=0,this.setDefault(i,a,s,c),this.unit=d;var v="animation";this.id=++p,document.body.addEventListener(h,function(e){var n=e.target;null===n.getAttribute(v)&&(v="data-animation");var i=n.getAttribute(v);if(null!==i){var r=i.split("__"),a=u(r,2),o=a[0],s=a[1];if(o==="taro-h5-poly-fill/"+t.id+"/create-animation"){var l=s.split("--"),c=u(l,2),h=c[0],f=c[1],m=void 0===f?0:f;m<t.animationMap[o+"__"+h]-1&&(n.setAttribute(v,o+"__"+h+"--"+(m+1)),"animation"===v&&n.setAttribute("data-animation",o+"__"+h+"--"+(m+1)))}}})}return l(Animation,[{"key":"transformUnit","value":function transformUnit(){for(var t=this,e=[],n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return i.forEach(function(n){e.push(isNaN(n)?n:""+n+t.unit)}),e}},{"key":"setDefault","value":function setDefault(t,e,n,i){this.DEFAULT={"duration":t,"delay":e,"timingFunction":n,"transformOrigin":i}}},{"key":"matrix","value":function matrix(t,e,n,i,r,a){return this.transform.push("matrix("+t+", "+e+", "+n+", "+i+", "+r+", "+a+")"),this}},{"key":"matrix3d","value":function matrix3d(t,e,n,i,r,a,o,s,u,l,c,h,f,m,p,d){return this.transform.push("matrix3d("+t+", "+e+", "+n+", "+i+", "+r+", "+a+", "+o+", "+s+", "+u+", "+l+", "+c+", "+h+", "+f+", "+m+", "+p+", "+d+")"),this}},{"key":"rotate","value":function rotate(t){return this.transform.push("rotate("+t+"deg)"),this}},{"key":"rotate3d","value":function rotate3d(t,e,n,i){return this.transform.push("rotate3d("+t+", "+e+", "+n+", "+i+"deg)"),this}},{"key":"rotateX","value":function rotateX(t){return this.transform.push("rotateX("+t+"deg)"),this}},{"key":"rotateY","value":function rotateY(t){return this.transform.push("rotateY("+t+"deg)"),this}},{"key":"rotateZ","value":function rotateZ(t){return this.transform.push("rotateZ("+t+"deg)"),this}},{"key":"scale","value":function scale(t,e){return this.transform.push("scale("+t+", "+e+")"),this}},{"key":"scale3d","value":function scale3d(t,e,n){return this.transform.push("scale3d("+t+", "+e+", "+n+")"),this}},{"key":"scaleX","value":function scaleX(t){return this.transform.push("scaleX("+t+")"),this}},{"key":"scaleY","value":function scaleY(t){return this.transform.push("scaleY("+t+")"),this}},{"key":"scaleZ","value":function scaleZ(t){return this.transform.push("scaleZ("+t+")"),this}},{"key":"skew","value":function skew(t,e){return this.transform.push("skew("+t+", "+e+")"),this}},{"key":"skewX","value":function skewX(t){return this.transform.push("skewX("+t+")"),this}},{"key":"skewY","value":function skewY(t){return this.transform.push("skewY("+t+")"),this}},{"key":"translate","value":function translate(t,e){var n=this.transformUnit(t,e),i=u(n,2);return t=i[0],e=i[1],this.transform.push("translate("+t+", "+e+")"),this}},{"key":"translate3d","value":function translate3d(t,e,n){var i=this.transformUnit(t,e,n),r=u(i,3);return t=r[0],e=r[1],n=r[2],this.transform.push("translate3d("+t+", "+e+", "+n+")"),this}},{"key":"translateX","value":function translateX(t){var e=this.transformUnit(t);return t=u(e,1)[0],this.transform.push("translateX("+t+")"),this}},{"key":"translateY","value":function translateY(t){var e=this.transformUnit(t);return t=u(e,1)[0],this.transform.push("translateY("+t+")"),this}},{"key":"translateZ","value":function translateZ(t){var e=this.transformUnit(t);return t=u(e,1)[0],this.transform.push("translateZ("+t+")"),this}},{"key":"opacity","value":function opacity(t){return this.rules.push("opacity: "+t),this}},{"key":"backgroundColor","value":function backgroundColor(t){return this.rules.push("background-color: "+t),this}},{"key":"width","value":function width(t){var e=this.transformUnit(t);return t=u(e,1)[0],this.rules.push("width: "+t),this}},{"key":"height","value":function height(t){var e=this.transformUnit(t);return t=u(e,1)[0],this.rules.push("height: "+t),this}},{"key":"top","value":function top(t){var e=this.transformUnit(t);return t=u(e,1)[0],this.rules.push("top: "+t),this}},{"key":"right","value":function right(t){var e=this.transformUnit(t);return t=u(e,1)[0],this.rules.push("right: "+t),this}},{"key":"bottom","value":function bottom(t){var e=this.transformUnit(t);return t=u(e,1)[0],this.rules.push("bottom: "+t),this}},{"key":"left","value":function left(t){var e=this.transformUnit(t);return t=u(e,1)[0],this.rules.push("left: "+t),this}},{"key":"step","value":function step(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.DEFAULT,n=t.duration,i=void 0===n?e.duration:n,r=t.delay,a=void 0===r?e.delay:r,o=t.timingFunction,s=void 0===o?e.timingFunction:o,u=t.transformOrigin,l=void 0===u?e.transformOrigin:u;return this.steps.push([this.rules.join(";"),this.transform.join(" "),f+"-origin: "+l,"transition: all "+i+"ms "+s+" "+a+"ms"].filter(function(t){return""!==t&&t!==f+":"}).join(";")),this.rules=[],this.transform=[f+":"],this}},{"key":"createAnimationData","value":function createAnimationData(){var t="taro-h5-poly-fill/"+this.id+"/create-animation__"+this.animationMapCount++;return this.animationMap[t]=this.steps.length,this.steps.forEach(function(e,n){var i=0===n?'[animation="'+t+'"], [data-animation="'+t+'"]':'[animation="'+t+"--"+n+'"], [data-animation="'+t+"--"+n+'"]';c.add(i+" { "+e+" }")}),this.steps=[],t}},{"key":"export","value":function _export(){return this.createAnimationData()}}]),Animation}();function createAnimation(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(d,[null].concat(e)))}var v=n(7),y=n.n(v),b=n(13),g=n(248),k=n(213);n.d(e,"a",function(){return w});var _=function(){function defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t}}();var w=function(t){function AtNoticebar(){!function noticebar_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,AtNoticebar);var t=function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(AtNoticebar.__proto__||Object.getPrototypeOf(AtNoticebar)).apply(this,arguments)),e="J_"+Math.ceil(1e6*Math.random()).toString(36);return t.state={"show":!0,"animElemId":e,"dura":15,"isWEAPP":o.a.getEnv()===o.a.ENV_TYPE.WEAPP,"isALIPAY":o.a.getEnv()===o.a.ENV_TYPE.ALIPAY,"isWEB":o.a.getEnv()===o.a.ENV_TYPE.WEB},t}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(AtNoticebar,k["a"]),_(AtNoticebar,[{"key":"onClose","value":function onClose(){var t;this.setState({"show":!1}),this.props.onClose&&(t=this.props).onClose.apply(t,arguments)}},{"key":"onGotoMore","value":function onGotoMore(){var t;this.props.onGotoMore&&(t=this.props).onGotoMore.apply(t,arguments)}},{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(){this.timeout||(this.interval&&clearInterval(this.interval),this.initAnimation())}},{"key":"componentDidMount","value":function componentDidMount(){this.props.marquee&&this.initAnimation()}},{"key":"initAnimation","value":function initAnimation(){var t=this,e=this.state,n=e.isWEAPP,i=e.isALIPAY;this.timeout=setTimeout(function(){if(t.timeout=null,t.state.isWEB){var e=document.querySelector("."+t.state.animElemId);if(!e)return;var r=e.getBoundingClientRect().width/+t.props.speed;t.setState({"dura":r})}else if(n||i){(i?Object(s.a)():Object(s.a)().in(t.$scope)).select("."+t.state.animElemId).boundingClientRect().exec(function(e){if(e=e[0]){var n=e.width,i=n/+t.props.speed,r=createAnimation({"duration":1e3*i,"timingFunction":"linear"}),a=createAnimation({"duration":0,"timingFunction":"linear"}),o=createAnimation({"duration":0,"timingFunction":"linear"}),s=function animBody(){o.opacity(0).step(),t.setState({"animationData":o.export()}),setTimeout(function(){a.translateX(0).step(),t.setState({"animationData":a.export()})},300),setTimeout(function(){o.opacity(1).step(),t.setState({"animationData":o.export()})},600),setTimeout(function(){r.translateX(-n).step(),t.setState({"animationData":r.export()})},900)};s(),t.interval=setInterval(s,1e3*i+1e3)}})}},100)}},{"key":"render","value":function render(){var t=this.props,e=t.single,n=t.icon,r=t.marquee,a=t.customStyle,o=this.props,s=o.showMore,u=o.close,l=this.state.dura,c=this.props.moreText;e||(s=!1),c||(c="查看详情");var h={},f=["at-noticebar__content-inner"];r&&(u=!1,h["animation-duration"]=l+"s",f.push(this.state.animElemId));var m={"at-noticebar--marquee":r,"at-noticebar--weapp":r&&(this.state.isWEAPP||this.state.isALIPAY),"at-noticebar--single":!r&&e},p=["at-icon"];return n&&p.push("at-icon-"+n),this.state.show&&i.j.createElement(b.a,{"className":y()(["at-noticebar"],m,this.props.className),"style":a},u&&i.j.createElement(b.a,{"className":"at-noticebar__close","onClick":this.onClose.bind(this)},i.j.createElement(g.a,{"className":"at-icon at-icon-close"})),i.j.createElement(b.a,{"className":"at-noticebar__content"},n&&i.j.createElement(b.a,{"className":"at-noticebar__content-icon"},i.j.createElement(g.a,{"className":y()(p,p)})),i.j.createElement(b.a,{"className":"at-noticebar__content-text"},i.j.createElement(b.a,{"animation":this.state.animationData,"className":y()(f),"style":h},this.props.children))),s&&i.j.createElement(b.a,{"className":"at-noticebar__more","onClick":this.onGotoMore.bind(this)},i.j.createElement(g.a,{"className":"text"},c),i.j.createElement(b.a,{"className":"at-noticebar__more-icon"},i.j.createElement(g.a,{"className":"at-icon at-icon-chevron-right"}))))}}]),AtNoticebar}();w.defaultProps={"close":!1,"single":!1,"marquee":!1,"speed":100,"moreText":"查看详情","showMore":!1,"icon":"","customStyle":{},"onClose":function onClose(){},"onGotoMore":function onGotoMore(){}},w.propTypes={"close":a.a.bool,"single":a.a.bool,"marquee":a.a.bool,"speed":a.a.number,"moreText":a.a.string,"showMore":a.a.bool,"icon":a.a.string,"customStyle":a.a.oneOfType([a.a.object,a.a.string]),"onClose":a.a.func,"onGotoMore":a.a.func}}}]);