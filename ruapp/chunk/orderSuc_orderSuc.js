(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"215":function(e,t,n){"use strict";var o=n(212),r=n(301),a=n(216),c=n(10),i={"API_SVC":"http://chileme.natapp1.cc/chileme/buyer/"};t.a={"baseOptions":function baseOptions(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=e.url,l=e.data,s={"isShowLoading":!0,"loadingText":"正在加载","credentials":"include","url":i.API_SVC+n,"data":l,"method":t,"header":e.contentType?{"content-type":e.contentType||""}:{},"success":function success(e){return e.statusCode===a.a.NOT_FOUND?Object(c.c)("api","请求资源不存在"):e.statusCode===a.a.SERVER_ERROR?(Object(o.c)({"title":e.data.msg,"icon":"none"}),Object(c.c)("api","服务端出现了问题")):e.statusCode===a.a.FORBIDDEN?Object(c.c)("api","没有权限访问"):e.statusCode===a.a.SUCCESS?(500===e.data.code&&Object(o.c)({"title":e.data.msg,"icon":"none"}),e.data):void 0},"error":function error(e){Object(c.c)("api","请求接口出现问题",e)}};return Object(r.a)(s)},"get":function get(e){var t={"url":e,"data":arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}};return this.baseOptions(t)},"post":function post(e){var t={"url":e,"data":arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"contentType":arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/x-www-form-urlencoded"};return this.baseOptions(t,"POST")}}},"216":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return r});var o,r,a={"SUCCESS":200,"CLIENT_ERROR":400,"AUTHENTICATE":401,"FORBIDDEN":403,"NOT_FOUND":404,"SERVER_ERROR":500,"BAD_GATEWAY":502,"SERVICE_UNAVAILABLE":503,"GATEWAY_TIMEOUT":504};!function(e){e[e["新订单"]=0]="新订单",e[e["已送达"]=1]="已送达",e[e["已取消"]=2]="已取消",e[e["配送中..."]=3]="配送中..."}(o||(o={})),function(e){e[e["未付款"]=0]="未付款",e[e["已付款"]=1]="已付款"}(r||(r={}))},"217":function(e,t,n){"use strict";n.d(t,"a",function(){return createAction}),n.d(t,"b",function(){return createApiAction});var o=n(221),r=n.n(o);function createAction(e){return function(t){return{"type":e,"payload":t}}}function createApiAction(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){};return function(){var o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{"success":function success(){},"failed":function failed(){}},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return o=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var a=t[o](r),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){step("next",e)},function(e){step("throw",e)});e(c)}("next")})}}(r.a.mark(function _callee(e){var o;return r.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e({"type":i+"_request","params":a}),t.next=4,n(a);case 4:return o=t.sent,e({"type":i,"params":a,"payload":o}),c.success&&c.success({"payload":o}),t.abrupt("return",o);case 10:t.prev=10,t.t0=t.catch(0),e({"type":i+"_failure","params":a,"payload":t.t0}),c.failed&&c.failed({"payload":t.t0});case 14:case"end":return t.stop()}},_callee,t,[[0,10]])})),function(e){return o.apply(this,arguments)}}}},"224":function(e,t,n){"use strict";var o=n(8),r=n(24),a=n(217),c=n(215),i=n(11),l=Object(a.b)(i.d,function(e){return c.a.get("user/info",e)}),s=Object(a.b)(i.b,function(e){return c.a.post("register",e)}),u=Object(a.a)(i.c),p=Object(a.b)(i.a,function(){return c.a.get("logout")});t.a=Object(o.b)({"register":s,"login":u,"getUserInfo":l,"logout":p},r.a.dispatch)},"240":function(e,t,n){"use strict";var o=n(8),r=n(5),a=n(24),c=n(217),i=n(215),l=Object(c.b)(r.f,function(e){return i.a.get("order/list",e)}),s=Object(c.a)(r.i),u=Object(c.b)(r.d,function(e){return i.a.post("order/create",e)}),p=Object(c.b)(r.h,function(e){return i.a.get("order/detail",e)});t.a=Object(o.b)({"getorderList":l,"saveOrderData":s,"createorderList":u,"orderDetail":p},a.a.dispatch)},"295":function(e,t,n){},"297":function(e,t,n){e.exports=n.p+"static/images/courier.png"},"319":function(e,t,n){"use strict";n.r(t);var o=n(2),r=n(219),a=n(3),c=n(212),i=n(23),l=n(307),s=n(299),u=n(13),p=n(248),d=n(276),f=n(214),h=n.n(f),m=n(7),y=n.n(m),b=n(227),O=n.n(b),v=n(213),j=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var _=function(e){function AtModalHeader(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtModalHeader),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtModalHeader.__proto__||Object.getPrototypeOf(AtModalHeader)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtModalHeader,v["a"]),j(AtModalHeader,[{"key":"render","value":function render(){var e=y()("at-modal__header",this.props.className);return o.j.createElement(u.a,{"className":e},this.props.children)}}]),AtModalHeader}(),E=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var C=function(e){function AtModalAction(){return function action_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtModalAction),function action_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtModalAction.__proto__||Object.getPrototypeOf(AtModalAction)).apply(this,arguments))}return function action_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtModalAction,v["a"]),E(AtModalAction,[{"key":"render","value":function render(){var e=y()("at-modal__footer",{"at-modal__footer--simple":this.props.isSimple},this.props.className);return o.j.createElement(u.a,{"className":e},o.j.createElement(u.a,{"className":"at-modal__action"},this.props.children))}}]),AtModalAction}();C.defaultProps={"isSimple":!1},C.propTypes={"isSimple":h.a.bool};var g=n(259),P=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var w=function(e){function AtModalContent(){return function content_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtModalContent),function content_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtModalContent.__proto__||Object.getPrototypeOf(AtModalContent)).apply(this,arguments))}return function content_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtModalContent,v["a"]),P(AtModalContent,[{"key":"render","value":function render(){var e=y()("at-modal__content",this.props.className);return o.j.createElement(g.a,{"scrollY":!0,"className":e},this.props.children)}}]),AtModalContent}(),N=n(241),A=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var M=function(e){function AtModal(e){!function modal_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtModal);var t=function modal_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtModal.__proto__||Object.getPrototypeOf(AtModal)).apply(this,arguments));t.handleClickOverlay=function(){t.props.closeOnClickOverlay&&t.setState({"_isOpened":!1},t.handleClose)},t.handleClose=function(){O()(t.props.onClose)&&t.props.onClose()},t.handleCancel=function(){O()(t.props.onCancel)&&t.props.onCancel()},t.handleConfirm=function(){O()(t.props.onConfirm)&&t.props.onConfirm()},t.handleTouchMove=function(e){e.stopPropagation()};var n=e.isOpened;return t.state={"_isOpened":n,"isWEB":a.a.getEnv()===a.a.ENV_TYPE.WEB},t}return function modal_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtModal,v["a"]),A(AtModal,[{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){var t=e.isOpened;this.props.isOpened!==t&&Object(N.a)(t),t!==this.state._isOpened&&this.setState({"_isOpened":t})}},{"key":"render","value":function render(){var e=this.state,t=e._isOpened,n=e.isWEB,r=this.props,a=r.title,c=r.content,i=r.cancelText,l=r.confirmText,s=y()("at-modal",{"at-modal--active":t},this.props.className);if(a||c){var f=i||l;return o.j.createElement(u.a,{"className":s},o.j.createElement(u.a,{"onClick":this.handleClickOverlay,"className":"at-modal__overlay"}),o.j.createElement(u.a,{"className":"at-modal__container"},a&&o.j.createElement(_,null,o.j.createElement(p.a,null,a)),c&&o.j.createElement(w,null,o.j.createElement(u.a,{"className":"content-simple"},n?o.j.createElement(p.a,{"dangerouslySetInnerHTML":{"__html":c.replace(/\n/g,"<br/>")}}):o.j.createElement(p.a,null,c))),f&&o.j.createElement(C,{"isSimple":!0},i&&o.j.createElement(d.a,{"onClick":this.handleCancel},i),l&&o.j.createElement(d.a,{"onClick":this.handleConfirm},l))))}return o.j.createElement(u.a,{"onTouchMove":this.handleTouchMove,"className":s},o.j.createElement(u.a,{"className":"at-modal__overlay","onClick":this.handleClickOverlay}),o.j.createElement(u.a,{"className":"at-modal__container"},this.props.children))}}]),AtModal}();M.defaultProps={"closeOnClickOverlay":!0},M.propTypes={"title":h.a.string,"isOpened":h.a.bool,"onCancel":h.a.func,"onConfirm":h.a.func,"onClose":h.a.func,"content":h.a.string,"closeOnClickOverlay":h.a.bool,"cancelText":h.a.string,"confirmText":h.a.string};var k=n(317),T=n(318),I=n(302),S=(n(295),n(240)),x=n(216),R=n(297),D=n.n(R),W=n(215),L=n(224),B=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),H=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0};var U=function(e){function Index(e){!function orderSuc_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Index);var t=function orderSuc_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Index.__proto__||Object.getPrototypeOf(Index)).call(this,e));return t.state={"isOopenModal":!1,"payLoading":!1,"openPay":!1,"payMethod":"rupay"},L.a.getUserInfo({"openid":e.openid}),t}return function orderSuc_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,a["a"].Component),B(Index,[{"key":"componentWillMount","value":function componentWillMount(){this.getOrderDetail()}},{"key":"getOrderDetail","value":function getOrderDetail(){var e={"openid":this.props.openid,"orderId":this.$router.params.orderId};S.a.orderDetail(e)}},{"key":"hanldeRouterBack","value":function hanldeRouterBack(){a.a.navigateBack()}},{"key":"renderDetailList","value":function renderDetailList(e){return e.map(function(e){var t=e.productIcon,n=e.orderId,r=e.productName,a=e.productPrice,c=e.productQuantity;return o.j.createElement(u.a,{"className":"productItemWrapper","key":n},o.j.createElement(I.a,{"className":"foodOrderImg","mode":"scaleToFill","src":t}),o.j.createElement(u.a,{"className":"foodOrderRight"},o.j.createElement(p.a,{"className":"foodOrderName"},r),o.j.createElement(u.a,{"className":"foodOrderPrice"},o.j.createElement(p.a,null,"×",c),o.j.createElement(p.a,null,"¥",o.j.createElement(p.a,{"className":"foodOrderPriceHighLight"},a)))))})}},{"key":"showCancelOrderModal","value":function showCancelOrderModal(){this.setState({"isOopenModal":!0})}},{"key":"handleCancelOrder","value":function handleCancelOrder(e){var t=this;Object(c.b)({"title":"加载中"});var n={"openid":this.props.openid,"orderId":e};W.a.post("order/cancel",n).then(function(e){0===e.data.code&&(Object(c.a)(),t.handleCancel(),Object(c.c)({"title":"取消成功","icon":"success"}),t.getOrderDetail())})}},{"key":"handleCancel","value":function handleCancel(){this.setState({"isOopenModal":!1})}},{"key":"handleClosePayMethod","value":function handleClosePayMethod(){this.setState(function(e){return{"openPay":!e.openPay}})}},{"key":"handleChangePayMethod","value":function handleChangePayMethod(e){this.setState({"payMethod":e})}},{"key":"goToPay","value":function goToPay(e){var t=this,n=this.props.openid;if(this.setState({"payLoading":!0}),"rupay"!==this.state.payMethod)return this.setState({"payLoading":!1}),void Object(c.c)({"title":"暂未开放","icon":"none"});var o={"openid":n,"orderId":e};W.a.post("order/pay",o).then(function(e){t.setState({"payLoading":!1}),0===e.data.code&&Object(c.c)({"title":"支付成功","icon":"success","duration":1e3}).then(function(){setTimeout(function(){a.a.navigateBack()},1e3)})})}},{"key":"render","value":function render(){var e=this,t=this.props,n=t.currentOrder,r=t.account,a=n.orderId,c=(n.buyerName,n.buyerAddress,n.orderAmount),i=n.orderStatus,d=n.payStatus,f=n.orderDetailList;return o.j.createElement(u.a,{"className":"dd-padding Index"},o.j.createElement(l.a,{"onClickLeftIcon":this.hanldeRouterBack.bind(this),"color":"#000","leftIconType":"chevron-left"}),o.j.createElement(u.a,null,o.j.createElement(u.a,null,o.j.createElement(u.a,{"className":"detailTopWrapper"},o.j.createElement(I.a,{"src":D.a,"className":"detailTopImg","mode":"scaleToFill"}),o.j.createElement(u.a,{"className":"detailTopRightWrapper"},o.j.createElement(p.a,{"className":"payStatusWrapper"},x.c[d]),o.j.createElement(p.a,{"className":"orderStatusWrapper"},x.b[i]),0===i&&o.j.createElement(u.a,{"className":"recallBtn"},o.j.createElement(s.a,{"onClick":function onClick(){return e.showCancelOrderModal()},"circle":!0,"size":"small","customStyle":{"color":"#999"}},"申请退款")),1===i&&o.j.createElement(u.a,{"className":"recallBtn"},o.j.createElement(s.a,{"onClick":function onClick(){return e.handleClosePayMethod()},"circle":!0,"size":"small","type":"secondary"},"去支付")))))),o.j.createElement(M,{"isOpened":this.state.isOopenModal,"title":"确定取消订单吗","cancelText":"我再想想","confirmText":"确定","onClose":this.handleCancel.bind(this),"onCancel":this.handleCancel.bind(this),"onConfirm":function onConfirm(){return e.handleCancelOrder(a)}}),o.j.createElement(u.a,{"className":"dd-padding detailContentWrapper"},this.renderDetailList(f),o.j.createElement(u.a,{"className":"detailContentBottomWrapper"},o.j.createElement(u.a,{"className":"feeWrapper"},o.j.createElement(p.a,{"className":"feeTip"},"配送费"),o.j.createElement(p.a,null,"¥ ",o.j.createElement(p.a,{"className":"fee"},"0"))),o.j.createElement(p.a,{"className":"totalPrice"},"¥",o.j.createElement(p.a,{"className":"orderAmoutWrapper"},c)),o.j.createElement(u.a,{"className":"couponResultWrapper"},o.j.createElement(u.a,{"className":"couponTopWrapper"},o.j.createElement(p.a,{"className":"coupon"},"优惠券"),o.j.createElement(p.a,{"className":"couponColor"},"-¥",o.j.createElement(p.a,{"className":"couponAmount"},"0"))),o.j.createElement(p.a,{"className":"couponTip"},"无可用优惠券"))),o.j.createElement(u.a,{"className":"realPriceWrapper"},o.j.createElement(p.a,null,"实付：¥ ",o.j.createElement(p.a,{"className":"realPriceHighLight"},c)))),o.j.createElement(k.a,{"isOpened":this.state.openPay,"title":"请选择支付方式","onClose":this.handleClosePayMethod.bind(this)},o.j.createElement(T.a,{"options":[{"label":"支付宝","value":"alipay"},{"label":"微信支付","value":"wechat"},{"label":"儒币支付（余额："+r+"）","value":"rupay"}],"value":this.state.payMethod,"onClick":this.handleChangePayMethod.bind(this)}),o.j.createElement(s.a,{"loading":this.state.payLoading,"className":"shopBtn","type":"primary","onClick":function onClick(){return e.goToPay(a)}},"立即支付")))}},{"key":"componentDidMount","value":function componentDidMount(){H(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this)&&H(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){H(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this)&&H(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){H(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this)&&H(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidHide",this).call(this)}}]),Index}();U=Object(r.a)([Object(i.b)(function(e){var t=e.user,n=e.order;return{"openid":t.openid,"account":t.userInfo.account,"currentOrder":n.currentOrderDetail}})],U);t.default=U}}]);