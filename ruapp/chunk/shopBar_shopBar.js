(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"215":function(e,t,o){"use strict";var n=o(212),r=o(301),a=o(216),c=o(10),i={"API_SVC":"http://chileme.natapp1.cc/chileme/buyer/"};t.a={"baseOptions":function baseOptions(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",o=e.url,u=e.data,s={"isShowLoading":!0,"loadingText":"正在加载","credentials":"include","url":i.API_SVC+o,"data":u,"method":t,"header":e.contentType?{"content-type":e.contentType||""}:{},"success":function success(e){return e.statusCode===a.a.NOT_FOUND?Object(c.c)("api","请求资源不存在"):e.statusCode===a.a.SERVER_ERROR?(Object(n.c)({"title":e.data.msg,"icon":"none"}),Object(c.c)("api","服务端出现了问题")):e.statusCode===a.a.FORBIDDEN?Object(c.c)("api","没有权限访问"):e.statusCode===a.a.SUCCESS?(500===e.data.code&&Object(n.c)({"title":e.data.msg,"icon":"none"}),e.data):void 0},"error":function error(e){Object(c.c)("api","请求接口出现问题",e)}};return Object(r.a)(s)},"get":function get(e){var t={"url":e,"data":arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}};return this.baseOptions(t)},"post":function post(e){var t={"url":e,"data":arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"contentType":arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/x-www-form-urlencoded"};return this.baseOptions(t,"POST")}}},"216":function(e,t,o){"use strict";o.d(t,"a",function(){return a}),o.d(t,"b",function(){return n}),o.d(t,"c",function(){return r});var n,r,a={"SUCCESS":200,"CLIENT_ERROR":400,"AUTHENTICATE":401,"FORBIDDEN":403,"NOT_FOUND":404,"SERVER_ERROR":500,"BAD_GATEWAY":502,"SERVICE_UNAVAILABLE":503,"GATEWAY_TIMEOUT":504};!function(e){e[e["新订单"]=0]="新订单",e[e["已送达"]=1]="已送达",e[e["已取消"]=2]="已取消",e[e["配送中..."]=3]="配送中..."}(n||(n={})),function(e){e[e["未付款"]=0]="未付款",e[e["已付款"]=1]="已付款"}(r||(r={}))},"217":function(e,t,o){"use strict";o.d(t,"a",function(){return createAction}),o.d(t,"b",function(){return createApiAction});var n=o(221),r=o.n(n);function createAction(e){return function(t){return{"type":e,"payload":t}}}function createApiAction(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){};return function(){var n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{"success":function success(){},"failed":function failed(){}},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return n=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,o){return function step(n,r){try{var a=t[n](r),c=a.value}catch(e){return void o(e)}if(!a.done)return Promise.resolve(c).then(function(e){step("next",e)},function(e){step("throw",e)});e(c)}("next")})}}(r.a.mark(function _callee(e){var n;return r.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e({"type":i+"_request","params":a}),t.next=4,o(a);case 4:return n=t.sent,e({"type":i,"params":a,"payload":n}),c.success&&c.success({"payload":n}),t.abrupt("return",n);case 10:t.prev=10,t.t0=t.catch(0),e({"type":i+"_failure","params":a,"payload":t.t0}),c.failed&&c.failed({"payload":t.t0});case 14:case"end":return t.stop()}},_callee,t,[[0,10]])})),function(e){return n.apply(this,arguments)}}}},"225":function(e,t,o){"use strict";var n=o(8),r=o(5),a=o(24),c=o(217),i=o(215),u=Object(c.b)(r.e,function(){return i.a.get("product/list")}),s=Object(c.a)(r.b),p=Object(c.a)(r.a),l=Object(c.a)(r.g);t.a=Object(n.b)({"addSelectItem":p,"minusSelectItem":l,"getMenuList":u,"changeMenuKey":s},a.a.dispatch)},"229":function(e,t,o){"use strict";var n=o(2),r=o(219),a=o(3),c=o(23),i=o(13),u=o(302),s=o(248),p=(o(230),o(225)),l=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}();var d=function(e){function ProductItem(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ProductItem),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(ProductItem.__proto__||Object.getPrototypeOf(ProductItem)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ProductItem,a["a"].Component),l(ProductItem,[{"key":"navigateToItem","value":function navigateToItem(e){a.a.navigateTo({"url":"/pages/productDisplay/productDisplay?id="+e})}},{"key":"addSelectItem","value":function addSelectItem(e){p.a.addSelectItem({"id":e})}},{"key":"minusSelectItem","value":function minusSelectItem(e){p.a.minusSelectItem({"id":e})}},{"key":"render","value":function render(){var e=this,t=this.props,o=t.title,r=t.price,a=t.imageUrl,c=t.productId,p=t.idx,l=t.desc,d=t.chooseCount,f=t.noNeedCount,h=void 0!==f&&f;return n.j.createElement(i.a,{"className":"productItemWrapper"},n.j.createElement(u.a,{"className":"foodImg","mode":"scaleToFill","src":a,"onClick":function onClick(){return e.navigateToItem(c)}}),n.j.createElement(i.a,{"className":"foodRight"},n.j.createElement(s.a,{"className":"foodName"},o),n.j.createElement(s.a,{"className":"foodDesc two-line"},l),n.j.createElement(i.a,{"className":"foodPrice"},"¥ ",n.j.createElement(s.a,{"className":"foodPriceHighLight"},r)),!h&&n.j.createElement(i.a,{"className":"select-content"},void 0!==d&&d>0&&n.j.createElement(i.a,{"onClick":function onClick(){e.minusSelectItem(p)},"className":"minus"}),void 0!==d&&d>0&&n.j.createElement(i.a,{"className":"count"},d),n.j.createElement(i.a,{"onClick":function onClick(){e.addSelectItem(p)},"className":"plus"}))))}}]),ProductItem}();d=Object(r.a)([Object(c.b)(function(e){return{"product":e.product.shopCarData}})],d),t.a=d},"230":function(e,t,o){},"240":function(e,t,o){"use strict";var n=o(8),r=o(5),a=o(24),c=o(217),i=o(215),u=Object(c.b)(r.f,function(e){return i.a.get("order/list",e)}),s=Object(c.a)(r.i),p=Object(c.b)(r.d,function(e){return i.a.post("order/create",e)}),l=Object(c.b)(r.h,function(e){return i.a.get("order/detail",e)});t.a=Object(n.b)({"getorderList":u,"saveOrderData":s,"createorderList":p,"orderDetail":l},a.a.dispatch)},"291":function(e,t,o){},"316":function(e,t,o){"use strict";o.r(t);var n=o(2),r=o(219),a=o(3),c=o(13),i=o(248),u=o(23),s=o(307),p=o(300),l=o(299),d=(o(291),o(229)),f=o(240),h=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),m=function get(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,o)}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(o):void 0};var y=function(e){function ShopBar(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ShopBar);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(ShopBar.__proto__||Object.getPrototypeOf(ShopBar)).call(this,e));return t.state={},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ShopBar,a["a"].Component),h(ShopBar,[{"key":"componentWillUnmount","value":function componentWillUnmount(){}},{"key":"getTotalPrice","value":function getTotalPrice(){for(var e=this.props.shopCarData||[],t=0,o=0,n=[],r=0;r<e.length;r++)for(var a=e[r].spus||[],c=0;c<a.length;c++){var i=a[c].chooseCount;i>0&&(o+=i,a[c].index=c,a[c].outIndex=r,n.push(a[c]),t+=a[c].price*i)}return{"dotNum":o,"totalPrice":t,"chooseList":n}}},{"key":"renderTabsPane","value":function renderTabsPane(e){return e.map(function(e,t){return n.j.createElement(c.a,{"key":e.id,"className":"foodItem"},n.j.createElement(d.a,{"chooseCount":e.chooseCount,"idx":t,"title":e.name,"desc":e.description,"price":e.price,"imageUrl":e.icon,"productId":e.id}))})}},{"key":"handleRouterTo","value":function handleRouterTo(e){f.a.saveOrderData(e),a.a.navigateTo({"url":"/pages/order/order"})}},{"key":"hanldeRouterBack","value":function hanldeRouterBack(){a.a.navigateBack()}},{"key":"render","value":function render(){var e=this,t=this.getTotalPrice();return n.j.createElement(c.a,{"className":"ShopBar"},n.j.createElement(s.a,{"onClickLeftIcon":this.hanldeRouterBack.bind(this),"color":"#000","leftIconType":"chevron-left"}),n.j.createElement(i.a,{"className":"dd-padding"},"购物车(",t.dotNum,")"),n.j.createElement(p.a,{"className":"dd-padding shopBarNotice","icon":"volume-plus"},"点单满80免配送费，再送买一张送一礼券"),n.j.createElement(c.a,{"className":"dd-padding shopProductWrapper"},this.renderTabsPane(t.chooseList)),!!t.dotNum&&n.j.createElement(l.a,{"className":"shopBtn","type":"primary","onClick":function onClick(){return e.handleRouterTo(t)}},"结算：¥",t.totalPrice))}},{"key":"componentDidMount","value":function componentDidMount(){m(ShopBar.prototype.__proto__||Object.getPrototypeOf(ShopBar.prototype),"componentDidMount",this)&&m(ShopBar.prototype.__proto__||Object.getPrototypeOf(ShopBar.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){m(ShopBar.prototype.__proto__||Object.getPrototypeOf(ShopBar.prototype),"componentDidShow",this)&&m(ShopBar.prototype.__proto__||Object.getPrototypeOf(ShopBar.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){m(ShopBar.prototype.__proto__||Object.getPrototypeOf(ShopBar.prototype),"componentDidHide",this)&&m(ShopBar.prototype.__proto__||Object.getPrototypeOf(ShopBar.prototype),"componentDidHide",this).call(this)}}]),ShopBar}();y=Object(r.a)([Object(u.b)(function(e){return{"shopCarData":e.product.shopCarData}})],y),t.default=y}}]);